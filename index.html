<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>두근두근 새해두달 성경통독</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #fdf6e9;
            --primary-orange: #e6a770;
            --text-color: #444;
            --white: #ffffff;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: #f0f0f0; /* 배경 바깥쪽 색상 */
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* 캡처될 영역 전체 */
        #capture-area {
            background-color: var(--bg-color);
            padding: 20px 15px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px dashed var(--primary-orange);
            padding-bottom: 20px;
        }

        h1 { font-size: 1.6rem; margin: 5px 0; color: #333; letter-spacing: -0.5px; }
        .sub-title { font-weight: bold; color: var(--primary-orange); letter-spacing: 2px; font-size: 0.9rem; }

        .months-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        /* 모바일 대응: 화면이 작아지면 한 줄로 */
        @media (max-width: 768px) {
            .months-wrapper { grid-template-columns: 1fr; }
        }

        .month-section h2 {
            font-family: serif;
            font-style: italic;
            color: var(--primary-orange);
            border-bottom: 1px solid #eee;
            margin-top: 10px;
            font-size: 1.8rem;
        }

        .day-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 12px;
            font-size: 0.9rem;
            border-bottom: 1px solid #fcfcfc;
            padding-bottom: 6px;
        }

        .day-num {
            width: 28px;
            font-weight: bold;
            color: #b5835a;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .tasks {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .task-item {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            margin-right: 5px;
        }

        .task-item input { display: none; }

        /* "O" 동그라미 스타일 */
        .circle {
            width: 19px;
            height: 19px;
            border: 2px solid var(--primary-orange);
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
            position: relative;
            background: white;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        /* 체크 시 스타일 변화 */
        .task-item input:checked + .circle {
            background-color: var(--primary-orange);
        }

        .task-item input:checked + .circle::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .task-item input:checked ~ .task-text {
            color: #ccc;
            text-decoration: line-through;
        }

        footer {
            margin-top: 30px;
            font-size: 0.75rem;
            text-align: center;
            color: #999;
            padding: 15px;
            background: #fafafa;
            border-radius: 12px;
            line-height: 1.4;
        }

        /* 하단 플로팅 버튼 영역 */
        .button-area {
            max-width: 800px;
            margin: 20px auto 50px;
            padding: 0 15px;
            text-align: center;
        }

        .btn-capture {
            background-color: var(--primary-orange);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(230, 167, 112, 0.4);
            transition: all 0.3s;
            width: 100%;
        }

        .btn-capture:active {
            transform: scale(0.96);
            box-shadow: 0 2px 8px rgba(230, 167, 112, 0.4);
        }
    </style>
</head>
<body>

<div id="capture-area">
    <div class="container">
        <header>
            <h1>두근두근 새해두달 성경통독</h1>
            <div class="sub-title">2 MONTHS DAILY BIBLE CHECKLIST</div>
        </header>

        <div class="months-wrapper">
            <section class="month-section">
                <h2>January</h2>
                <div id="jan-list"></div>
            </section>

            <section class="month-section">
                <h2>February</h2>
                <div id="feb-list"></div>
            </section>
        </div>

        <footer>
            본 통독표 순서는 "골방말씀"에서 제작하여 제공하는 성경읽기표에 따랐습니다.<br>
            문의: 033.243.8669
        </footer>
    </div>
</div>

<div class="button-area">
    <button class="btn-capture" onclick="copyToClipboard()">현재 상태 화면 캡처 (클립보드 저장)</button>
</div>

<script>
    // 전체 성경 데이터 입력
    const bibleData = {
        jan: [
            { day: 1, readings: ["막 1-16장"] }, { day: 2, readings: ["창 1-22장"] }, { day: 3, readings: ["창 23-38장"] },
            { day: 4, readings: ["창 39-50장", "출 1-5장"] }, { day: 5, readings: ["출 6-25장"] }, { day: 6, readings: ["출 26-40장"] },
            { day: 7, readings: ["레 1-19장"] }, { day: 8, readings: ["레 20-27장", "민 1-6장"] }, { day: 9, readings: ["민 7-22장"] },
            { day: 10, readings: ["민 23-36장", "신 1-3장"] }, { day: 11, readings: ["신 4-21장"] }, { day: 12, readings: ["신 22-34장", "수 1-5장"] },
            { day: 13, readings: ["수 6-24장"] }, { day: 14, readings: ["요 1-14장"] }, { day: 15, readings: ["요 15-21장", "요일 1-5장", "요이 1장", "요삼 1장"] },
            { day: 16, readings: ["삿 1-15장"] }, { day: 17, readings: ["삿 16-21장", "룻 1-4장", "삼상 1-7장"] }, { day: 18, readings: ["삼상 8-23장"] },
            { day: 19, readings: ["삼상 24-31장", "삼하 1-11장"] }, { day: 20, readings: ["삼하 12-24장"] }, { day: 21, readings: ["아가 1-8장", "시 1-41편"] },
            { day: 22, readings: ["시 42-72편"] }, { day: 23, readings: ["시 73-106편"] }, { day: 24, readings: ["시 107-150편"] },
            { day: 25, readings: ["왕상 1-13장"] }, { day: 26, readings: ["왕상 14-22장", "왕하 1-5장"] }, { day: 27, readings: ["왕하 6-20장"] },
            { day: 28, readings: ["왕하 21-25장", "옵 1장", "미 1-7장"] }, { day: 29, readings: ["호 1-14장", "욜 1-3장", "암 1-9장"] },
            { day: 30, readings: ["욘 1-4장", "나 1-3장", "합 1-3장", "습 1-3장", "욥 1-14장"] }, { day: 31, readings: ["욥 15-42장"] }
        ],
        feb: [
            { day: 1, readings: ["약 1-5장", "눅 1-10장"] }, { day: 2, readings: ["눅 11-24장"] }, { day: 3, readings: ["행 1-15장"] },
            { day: 4, readings: ["행 16-28장", "딛 1-3장"] }, { day: 5, readings: ["대상 1-17장"] }, { day: 6, readings: ["대상 18-29장", "대하 1-9장"] },
            { day: 7, readings: ["대하 10-30장"] }, { day: 8, readings: ["대하 31-36장", "렘 1-9장"] }, { day: 9, readings: ["렘 10-28장"] },
            { day: 10, readings: ["렘 29-46장"] }, { day: 11, readings: ["렘 47-52장", "애 1-5장"] }, { day: 12, readings: ["겔 1-20장"] },
            { day: 13, readings: ["겔 21-36장"] }, { day: 14, readings: ["겔 37-48장", "에 1-10장"] }, { day: 15, readings: ["전 1-12장", "스 1-10장"] },
            { day: 16, readings: ["느 1-13장", "잠 1-8장"] }, { day: 17, readings: ["잠 9-31장"] }, { day: 18, readings: ["단 1-12장", "말 1-4장"] },
            { day: 19, readings: ["학 1-2장", "슥 1-14장", "갈 1-6장", "엡 1-6장"] }, { day: 20, readings: ["빌 1-4장", "골 1-4장", "롬 1-16장"] },
            { day: 21, readings: ["고전 1-16장", "고후 1-6장"] }, { day: 22, readings: ["고후 7-13장", "히 1-13장"] },
            { day: 23, readings: ["살전 1-5장", "살후 1-3장", "딤전 1-6장", "딤후 1-4장", "벧전 1-5장", "벧후 1-3장"] },
            { day: 24, readings: ["몬 1장", "유 1장", "계 1-22장"] }, { day: 25, readings: ["사 1-27장"] }, { day: 26, readings: ["사 28-48장"] },
            { day: 27, readings: ["사 49-66장", "마 1-8장"] }, { day: 28, readings: ["마 9-28장"] }
        ]
    };

    // 화면에 목록 그리기
    function renderList(month, targetId) {
        const container = document.getElementById(targetId);
        bibleData[month].forEach((item) => {
            const row = document.createElement('div');
            row.className = 'day-row';
            let html = `<div class="day-num">${item.day}</div><div class="tasks">`;
            item.readings.forEach((reading, rIdx) => {
                const storageKey = `bible-chk-${month}-${item.day}-${rIdx}`;
                const isChecked = localStorage.getItem(storageKey) === 'true' ? 'checked' : '';
                html += `
                    <label class="task-item">
                        <input type="checkbox" data-key="${storageKey}" ${isChecked} onchange="saveStatus(this)">
                        <span class="circle"></span>
                        <span class="task-text">${reading}</span>
                    </label>
                `;
            });
            html += `</div>`;
            row.innerHTML = html;
            container.appendChild(row);
        });
    }

    // 체크 상태 저장
    function saveStatus(checkbox) {
        localStorage.setItem(checkbox.dataset.key, checkbox.checked);
    }

    // 화면 캡처 및 클립보드 복사
    async function copyToClipboard() {
        const captureArea = document.getElementById('capture-area');
        const btn = document.querySelector('.btn-capture');
        btn.innerText = "캡처 중...";

        try {
            const canvas = await html2canvas(captureArea, {
                scale: 2, // 고해상도
                backgroundColor: "#fdf6e9"
            });

            canvas.toBlob(async (blob) => {
                if (!blob) return;
                try {
                    const item = new ClipboardItem({ "image/png": blob });
                    await navigator.clipboard.write([item]);
                    alert("성경 통독표가 클립보드에 복사되었습니다! 카카오톡 등에 붙여넣기 하세요.");
                } catch (err) {
                    // 클립보드 미지원 환경 (일부 모바일 브라우저) 대응
                    const image = canvas.toDataURL("image/png");
                    const link = document.createElement('a');
                    link.href = image;
                    link.download = `성경통독_${new Date().getMonth()+1}월.png`;
                    link.click();
                    alert("클립보드 복사가 지원되지 않아 이미지 파일로 저장했습니다.");
                }
                btn.innerText = "현재 상태 화면 캡처 (클립보드 저장)";
            }, "image/png");
        } catch (e) {
            console.error(e);
            alert("캡처에 실패했습니다.");
            btn.innerText = "현재 상태 화면 캡처 (클립보드 저장)";
        }
    }

    // 초기 실행
    renderList('jan', 'jan-list');
    renderList('feb', 'feb-list');
</script>

</body>
</html>
